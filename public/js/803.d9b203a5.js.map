{"version":3,"file":"js/803.d9b203a5.js","mappings":"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","sources":["webpack://shanotes-ui/./src/components/notes/Notes.vue","webpack://shanotes-ui/./src/components/notes/PathTree.vue","webpack://shanotes-ui/./src/api/notes.js","webpack://shanotes-ui/./src/components/notes/PathTree.vue?6044","webpack://shanotes-ui/./src/components/notes/Notes.vue?0aaf"],"sourcesContent":["<template>\r\n  <div id=\"main\">\r\n    <PathTree />\r\n  </div>\r\n</template>\r\n<script>\r\nimport PathTree from './PathTree.vue'\r\nexport default {\r\n  components: { PathTree }\r\n}\r\n</script>\r\n<style scoped>\r\n#main {\r\n  width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"main\">\r\n    <el-card id=\"card\">\r\n      <!-- 操作栏 -->\r\n      <template #header>\r\n        <div class=\"operator-bar\">\r\n          <!-- 返回 -->\r\n          <el-button text @click=\"handleFolderBack\">\r\n            <el-icon>\r\n              <ArrowLeft />\r\n            </el-icon>\r\n          </el-button>\r\n          <!-- 打开，添加，删除 -->\r\n          <el-button-group>\r\n            <el-button text @click=\"open_folder\">\r\n              <el-icon>\r\n                <FolderOpened />\r\n              </el-icon>\r\n            </el-button>\r\n            <el-button text @click=\"dialog_vis=true\">\r\n              <el-icon>\r\n                <FolderAdd />\r\n              </el-icon>\r\n            </el-button>\r\n            <el-button type=\"danger\" @click=\"del_link\">\r\n              <el-icon>\r\n                <Delete />\r\n              </el-icon>\r\n            </el-button>\r\n          </el-button-group>\r\n        </div>\r\n      </template>\r\n      <!-- 目录树 -->\r\n      <el-tree v-loading=\"loading\" highlight-current :data=\"folder\"\r\n        @node-click=\"handleNodeClick\" :props=\"{ class: customNodeClass }\"></el-tree>\r\n    </el-card>\r\n    <!-- 创建文件(夹)对话框 -->\r\n    <el-dialog v-model=\"dialog_vis\" title=\"创建新路径\" :before-close=\"handleDiaClose\">\r\n\r\n      <el-form label-width=\"120px\">\r\n        <el-form-item label=\"目录类型\">\r\n          <el-radio-group v-model=\"create_info.type\">\r\n            <el-radio label=\"folder\">文件夹</el-radio>\r\n            <el-radio label=\"file\">文件</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"create_info.title\" :style=\"{'width':'200px'}\" id=\"path-name-input\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialog_vis = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"createLink\">确认</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 删除文件夹对话框 -->\r\n    <el-dialog v-model=\"del_dia_vis\" title=\"删除确认\">\r\n      <span>\r\n        <p style=\"margin-bottom:40px; font-size:30px;color:red\">\r\n          你确定要删除{{selected_folder.title}}吗？删除操作不可撤销<br />\r\n        </p>\r\n      </span>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialog_vis = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmDeleteLink\">确认</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { root_path, create_folder, del, create_note, get_children } from \"../../api/notes\";\r\nimport { read_link } from '../../api/notes';\r\n\r\nimport { ElMessage } from 'element-plus'\r\n\r\n\r\nconst FOLDER_TAG = 1, FILE_TAG = 2;\r\n\r\n\r\nexport default {\r\n  async mounted() {\r\n    this.froot = this.folder[0];\r\n    this.selected_folder = this.froot;\r\n    await this.reload_root();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      create_info: {\r\n        title: '',\r\n        type: ''\r\n      },\r\n      // 选中的folder id \r\n      selected_fid: 0,\r\n      //选中的folder \r\n      selected_folder: null,\r\n      loading: false,\r\n      // 创建对话框\r\n      dialog_vis: false,\r\n      // 删除对话框\r\n      del_dia_vis: false,\r\n\r\n      is_empty_folder: false,\r\n      froot: null,\r\n      folder: [{\r\n        label: '根目录',\r\n        path_id: 0,\r\n        link_type: 1,\r\n        depth: 0,\r\n        children: [],\r\n        parent: 0,\r\n      }]\r\n    }\r\n  },\r\n  methods: {\r\n    customNodeClass(tree, node) {\r\n      let data = node.data;\r\n      if (data.link_type == 1) {\r\n        return `is-folder`;\r\n      }\r\n      return null;\r\n\r\n    },\r\n    // 加载根路径\r\n    async reload_root(path_id = 0) {\r\n      let root_folder;\r\n      if (path_id == 0) {\r\n        this.froot.parent = 0;\r\n        this.froot.path_id = 0;\r\n        this.froot.label = \"根目录\";\r\n        this.froot.depth = 0;\r\n        this.froot.children = [];\r\n\r\n        this.loading = true;\r\n        root_folder = await root_path();\r\n        this.loading = false;\r\n\r\n        this.is_empty_folder = root_folder.meta.status != 200;\r\n        if (!this.is_empty_folder) {\r\n          this.froot.children = await this.process_folder(root_folder.value, 1);\r\n        }\r\n      }\r\n      else {\r\n        let folder_meta = await read_link(path_id);\r\n        if (folder_meta.meta.status != 200)\r\n          return alert(folder_meta.meta.message);\r\n        folder_meta = folder_meta.content;\r\n        console.log(folder_meta);\r\n        this.froot.path_id = folder_meta.id;\r\n        this.froot.label = folder_meta.title;\r\n        this.froot.parent = folder_meta.parent;\r\n        this.froot.depth = 0;\r\n        this.froot.children = [];\r\n\r\n        this.loading = true;\r\n        root_folder = await get_children(path_id);\r\n        this.loading = false;\r\n\r\n        this.is_empty_folder = root_folder == null;\r\n        if (!this.is_empty_folder) {\r\n          this.froot.children = await this.process_folder(root_folder, this.froot.path_id, 1);\r\n        }\r\n      }\r\n\r\n    },\r\n    // 将文件列表转为element tree\r\n    async process_folder(value, parent, depth = 1) {\r\n      let ret = [];\r\n      for (let item of value) {\r\n        let obj = { label: item.title, path_id: item.id, link_type: item.link_type, children: null, parent };\r\n        // 每次最多多读取一层\r\n        if (depth < this.froot.depth + 2 && item.link_type == FOLDER_TAG) {\r\n          let sons = await get_children(item.id);\r\n          if (sons != null)\r\n            obj.children = await this.process_folder(sons, item.id, depth + 1);\r\n        }\r\n        if (item.children != undefined && item.children != null)\r\n          obj.children = item.children;\r\n        ret.push(obj);\r\n      }\r\n      return ret;\r\n    },\r\n\r\n    handleDiaClose() {\r\n      this.dialog_vis = false;\r\n    },\r\n    async handleFolderBack() {\r\n      if (this.froot.path_id != 0) {\r\n        await this.reload_root(this.froot.parent);\r\n      }\r\n    },\r\n    async createLink() {\r\n      if (this.create_info.title.length < 1)\r\n        return alert(\"标题必须长度必须大于1\");\r\n      if (this.create_info.type == \"folder\") {\r\n        let id = await create_folder(this.selected_fid, this.create_info.title);\r\n        if (id.meta.status != 200)\r\n          return alert('创建失败');\r\n\r\n        id = id.id;\r\n        let val = {\r\n          label: this.create_info.title, path_id: id, link_type: 1, children: []\r\n        }\r\n        this.selected_folder.children.push(val);\r\n      }\r\n      else if (this.create_info.type == 'file') {\r\n        let id = await create_note(this.selected_fid, this.create_info.title);\r\n        if (id.meta.status != 200)\r\n          return alert('创建失败');\r\n\r\n        id = id.id;\r\n        let val = {\r\n          label: this.create_info.title, path_id: id, link_type: 2, children: []\r\n        }\r\n        this.selected_folder.children.push(val);\r\n      }\r\n      this.dialog_vis = false;\r\n    },\r\n\r\n    del_link() {\r\n      this.del_dia_vis = true;\r\n    },\r\n    async open_folder() {\r\n      if (this.selected_folder.link_type != FOLDER_TAG)\r\n        ElMessage({\r\n          message: '请打开一个文件夹',\r\n          type: 'error',\r\n        })\r\n      else {\r\n        await this.reload_root(this.selected_fid);\r\n      }\r\n    },\r\n    async confirmDeleteLink() {\r\n      await del(this.selected_fid);\r\n      this.del_dia_vis = false;\r\n\r\n      let iter = (value) => {\r\n        if (value.link_type == FOLDER_TAG && value.children) {\r\n          value.children = value.children.filter((item) => {\r\n            return item.path_id != this.selected_fid;\r\n          })\r\n          for (let item of value.children)\r\n            iter(item);\r\n        }\r\n      }\r\n\r\n      iter(this.froot);\r\n\r\n    },\r\n    handleNodeClick(tree_node) {\r\n      this.selected_fid = tree_node.path_id;\r\n      this.selected_folder = tree_node;\r\n      // 文件类型\r\n      if (tree_node.link_type == '2') {\r\n\r\n      }\r\n      //文件夹\r\n      else {\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.main {\r\n  width: 250px;\r\n}\r\n.el-card {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  min-height: 90vh;\r\n}\r\n\r\n#card {\r\n  .operator-bar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.is-folder > .el-tree-node__content {\r\n  font-weight: bolder;\r\n}\r\n</style>","import { doGet, doPost } from \"@/utils/request\";\r\n// raw\r\nexport async function root_path() {\r\n    return await doGet('/notes/root');\r\n}\r\nexport async function create_folder(parent, title) {\r\n    return await doPost('/notes/create_folder', { parent, title })\r\n}\r\nexport async function create_note(parent, title) {\r\n    return await doPost('/notes/create_note', { parent, title })\r\n}\r\nexport async function del(id){\r\n    return await doPost('/notes/del_link',{path_id:id});\r\n}\r\nexport async function read_link(id){\r\n    return await doGet('/notes/read_link',{path_id:id});\r\n}\r\n// processed\r\nexport async function get_children(parent) {\r\n    let ret = [];\r\n\r\n    let pinfo = await doGet('/notes/read_link', { path_id: parent });\r\n    if (pinfo.meta.status != 200)\r\n        return [];\r\n    let value = pinfo.content;\r\n    let file_list = JSON.parse(value.content);\r\n    let cinfo = await doGet('/notes/read_child', { path_id: parent });\r\n    if (cinfo.meta.status != 200 || !cinfo.value)\r\n        return [];\r\n    let tab = new Map();\r\n    cinfo = cinfo.value;\r\n\r\n    for (let item of cinfo)\r\n        tab.set(item.id, item);\r\n    for (let item of file_list)\r\n        if (tab.has(item))\r\n            ret.push(tab.get(item));\r\n    return ret;\r\n}\r\n","import { render } from \"./PathTree.vue?vue&type=template&id=55349fb4&scoped=true\"\nimport script from \"./PathTree.vue?vue&type=script&lang=js\"\nexport * from \"./PathTree.vue?vue&type=script&lang=js\"\n\nimport \"./PathTree.vue?vue&type=style&index=0&id=55349fb4&lang=less&scoped=true\"\nimport \"./PathTree.vue?vue&type=style&index=1&id=55349fb4&lang=css\"\n\nimport exportComponent from \"D:\\\\Github\\\\Shagula\\\\shanotes-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55349fb4\"]])\n\nexport default __exports__","import { render } from \"./Notes.vue?vue&type=template&id=eba5af8a&scoped=true\"\nimport script from \"./Notes.vue?vue&type=script&lang=js\"\nexport * from \"./Notes.vue?vue&type=script&lang=js\"\n\nimport \"./Notes.vue?vue&type=style&index=0&id=eba5af8a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Github\\\\Shagula\\\\shanotes-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-eba5af8a\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_createVNode","_component_PathTree","class","style","_createElementVNode","_component_el_card","header","_component_el_button","text","onClick","$options","_component_el_icon","_component_ArrowLeft","_component_el_button_group","_component_FolderOpened","$data","_component_FolderAdd","type","_component_Delete","_component_el_tree","data","onNodeClick","props","_component_el_dialog","$event","title","footer","_component_el_form","_component_el_form_item","label","_component_el_radio_group","_component_el_radio","_component_el_input","_toDisplayString","_hoisted_9","async","root_path","doGet","create_folder","parent","doPost","create_note","del","path_id","read_link","get_children","ret","pinfo","meta","status","value","content","file_list","JSON","parse","cinfo","tab","Map","item","set","has","push","get","FOLDER_TAG","this","froot","folder","selected_folder","reload_root","create_info","selected_fid","loading","dialog_vis","del_dia_vis","is_empty_folder","link_type","depth","children","methods","customNodeClass","tree","node","root_folder","process_folder","folder_meta","alert","message","console","log","obj","sons","undefined","handleDiaClose","length","val","del_link","ElMessage","iter","filter","handleNodeClick","tree_node","__exports__","components","PathTree","render"],"sourceRoot":""}